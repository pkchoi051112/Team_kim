<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>맛살집</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    header {
      display: flex;
      justify-content: space-between;
      padding: 12px 18px;
      background: #fff;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    #left-nav a {
      font-size: 22px;
      font-weight: bold;
      margin-right: auto;
    }
    #right-nav a {
      margin-left: 20px;
    }
    a {
      text-decoration: none;
      color: #333;
    }
    #map {
      width: 100%;
      height: 360px;
      margin-top: 18px;
      border-radius: 8px;
    }
    .page {
      display: none;
      padding: 16px;
    }
    .store-item {
      padding: 12px;
      border-bottom: 1px solid #ddd;
    }
    .store-item div:nth-child(1) {
      font-size: 18px;
      font-weight: bold;
    }
  </style>

  <!-- Kakao Map API (⭐ 여기에 개인키 넣기) -->
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_KAKAO_MAP_KEY"></script>
</head>

<body>

<header>
  <div id="left-nav">
    <a href="#" onclick="showPage('home')">맛살집</a>
  </div>
  <div id="right-nav">
    <a href="#" onclick="showPage('map')">지도</a>
    <a href="#" onclick="showPage('value')">가성비</a>
  </div>
</header>

<!-- ============================ 홈 페이지 ============================ -->
<div id="home" class="page">
  <h2>내 주변 맛집</h2>
  <div id="map"></div>
  <div id="homeList"></div>
</div>

<!-- ============================ 지도 페이지 ============================ -->
<div id="mapPage" class="page">
  <h2>ERICA 근처 맛집 지도</h2>
  <div id="map2"></div>
  <div id="mapList"></div>
</div>

<!-- ============================ 가성비 페이지 ============================ -->
<div id="value" class="page">
  <h2>⭐ 가성비 맛집</h2>
  <div id="valueList"></div>
</div>

<script>
// ----------------------------- 공통 데이터 -----------------------------
const stores = [
  {
    name: "정가네김밥",
    category: "한식",
    priceMin: 3000,
    priceMax: 7000,
    coords: { lat: 37.3013, lng: 126.8369 }
  },
  {
    name: "홍콩반점",
    category: "중식",
    priceMin: 8000,
    priceMax: 12000,
    coords: { lat: 37.3009, lng: 126.8393 }
  },
  {
    name: "백소정",
    category: "일식",
    priceMin: 9000,
    priceMax: 13000,
    coords: { lat: 37.3002, lng: 126.8387 }
  },
  {
    name: "P&P 파스타하우스",
    category: "양식",
    priceMin: 12000,
    priceMax: 18000,
    coords: { lat: 37.3007, lng: 126.8386 }
  }
];

// ----------------------------- 페이지 전환 -----------------------------
function showPage(page) {
  document.querySelectorAll(".page").forEach(p => p.style.display = "none");

  if (page === "home") document.getElementById("home").style.display = "block";
  if (page === "map") document.getElementById("mapPage").style.display = "block";
  if (page === "value") document.getElementById("value").style.display = "block";

  if (page === "home") loadGPSMap();
  if (page === "map") loadEricaMap();
  if (page === "value") loadValueList();
}

showPage("home"); // 기본 화면

// ----------------------------- 1) 홈(GPS 기반) -----------------------------
function loadGPSMap() {
  const container = document.getElementById("map");
  container.innerHTML = "";

  if (!navigator.geolocation) {
    container.innerHTML = "<p>GPS를 지원하지 않는 환경입니다.</p>";
    return;
  }

  navigator.geolocation.getCurrentPosition(pos => {
    const lat = pos.coords.latitude;
    const lng = pos.coords.longitude;

    const map = new kakao.maps.Map(container, {
      center: new kakao.maps.LatLng(lat, lng),
      level: 3
    });

    // 내 위치 마커
    new kakao.maps.Marker({
      map,
      position: new kakao.maps.LatLng(lat, lng)
    });

    const list = document.getElementById("homeList");
    list.innerHTML = "";

    stores.forEach(s => {
      const star = s.priceMin <= 7000 ? " ⭐" : "";

      new kakao.maps.Marker({
        map,
        position: new kakao.maps.LatLng(s.coords.lat, s.coords.lng)
      });

      list.innerHTML += `
        <div class="store-item">
          <div>${s.name}${star}</div>
          <div>${s.category}</div>
          <div>${s.priceMin}~${s.priceMax}원</div>
        </div>`;
    });
  });
}

// ----------------------------- 2) ERICA 지도 -----------------------------
function loadEricaMap() {
  const container = document.getElementById("map2");
  container.innerHTML = "";

  const map = new kakao.maps.Map(container, {
    center: new kakao.maps.LatLng(37.3005, 126.8385),
    level: 3
  });

  const list = document.getElementById("mapList");
  list.innerHTML = "";

  stores.forEach(s => {
    const star = s.priceMin <= 7000 ? " ⭐" : "";

    new kakao.maps.Marker({
      map,
      position: new kakao.maps.LatLng(s.coords.lat, s.coords.lng)
    });

    list.innerHTML += `
      <div class="store-item">
        <div>${s.name}${star}</div>
        <div>${s.category}</div>
        <div>${s.priceMin}~${s.priceMax}원</div>
      </div>`;
  });
}

// ----------------------------- 3) 가성비 ⭐ 목록 -----------------------------
function loadValueList() {
  const list = document.getElementById("valueList");
  list.innerHTML = "";

  stores
    .filter(s => s.priceMin <= 7000)
    .forEach(s => {
      list.innerHTML += `
        <div class="store-item">
          <div>${s.name} ⭐</div>
          <div>${s.category}</div>
          <div>${s.priceMin}~${s.priceMax}원</div>
        </div>`;
    });
}
</script>

</body>
</html>
